<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>keyboard_dol_c</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<body>
<a href="javascript:void(0)" onclick="api()">dol</a>
</body>
<script>
function api() {

var keymap = {
        "0":[
                ["KC_GRV","KC_1","KC_2","KC_3","KC_4","KC_5","KC_6","KC_7","KC_8","KC_9","KC_0","KC_MINS","KC_EQL","KC_BSPC"],
                ["KC_TAB","KC_Q","KC_W","KC_E","KC_R","KC_T","KC_Y","KC_U","KC_I","KC_O","KC_P","KC_LBRC","KC_RBRC","KC_BSLS"],
                ["KC_CAPS","KC_A","KC_S","KC_D","KC_F","KC_G","KC_H","KC_J","KC_K","KC_L","KC_SCLN","KC_QUOT","KC_NO","KC_ENT"],
                ["KC_LSFT","KC_NO","KC_Z","KC_X","KC_C","KC_V","KC_B","KC_N","KC_M","KC_COMM","KC_DOT","KC_SLSH","KC_NO","KC_RSFT"],
                ["KC_LCTL","KC_LGUI","KC_LALT","KC_NO","KC_NO","KC_TRNS","KC_NO","KC_NO","KC_NO","KC_NO","KC_FN0","KC_LGUI","KC_APP","KC_RCTL"]
            ],
        "1":[
                ["KC_GRV","KC_1","KC_2","KC_3","KC_4","KC_5","KC_6","KC_7","KC_8","KC_9","KC_0","KC_MINS","KC_EQL","KC_BSPC"],
                ["KC_TAB","KC_Q","KC_W","KC_E","KC_R","KC_T","KC_Y","KC_U","KC_I","KC_O","KC_P","KC_LBRC","KC_RBRC","KC_BSLS"],
                ["KC_CAPS","KC_A","KC_S","KC_D","KC_F","KC_G","KC_H","KC_J","KC_K","KC_L","KC_SCLN","KC_QUOT","KC_NO","KC_ENT"],
                ["KC_LSFT","KC_NO","KC_Z","KC_X","KC_C","KC_V","KC_B","KC_N","KC_M","KC_COMM","KC_DOT","KC_SLSH","KC_NO","KC_UP"],
                ["KC_LCTL","KC_LGUI","KC_LALT","KC_NO","KC_NO","KC_TRNS","KC_NO","KC_NO","KC_NO","KC_NO","KC_FN0","KC_LEFT","KC_DOWN","KC_RGHT"]
            ]
    };
var fn = {
        "0":["ACTION_LAYER_MOMENTARY",1]
    };

// add data
var obj = {
        'matrix_rows': 5,
        'matrix_cols': 14,
        'matrix_size': '',
        'max_layers': 8,
        'max_fns': 32,
        'eep_size': 1024,
        'eep_start': 17,
        'keymaps': JSON.stringify(keymap),
        'fn_actions': JSON.stringify(fn)
    },
    jsonData;
// init XMLHttpRequest
var xmlHttpRequest = new XMLHttpRequest();
// build poet method and backend target
xmlHttpRequest.open('POST', 'download.php?file=c');
xmlHttpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
// send request
// jsonData = JSON.stringify(obj);
function formUrlEncode(obj) {
    var urlData = '';
    for (var x in obj) {
        urlData = urlData + x + '=' + obj[x] + '&';
    }
    urlData = urlData.substr(0, (urlData.length - 1));
    return urlData;
}
xmlHttpRequest.send(formUrlEncode(obj));
xmlHttpRequest.onreadystatechange = function() {
    if (xmlHttpRequest.readyState == 4) {
        // do something
        if (xmlHttpRequest.status == 200) {
            console.log(xmlHttpRequest.responseText);
            var blob = new Blob([xmlHttpRequest.responseText]),
                link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.download = 'keymap_tkg.c';
            link.click();
        }
    }
}

}
</script>
</html>